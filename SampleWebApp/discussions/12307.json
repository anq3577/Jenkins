[
  {
    "Id": "40037",
    "ThreadId": "12307",
    "Html": "\r\nHello.<br /><br />I made the mistake of trying to remove the \"Manage Forum\" button and \"Forums\\Manage.aspx\" from being accessed by the Administrator role.  I only want the \"UserEdits\" role to see that button.  When i go to Forums, select a forum, then select a thread(topic) under Subject, i get the following error:<br /><br />Server Error in '/GirgentiWebSite' Application.<br />--------------------------------------------------------------------------------<br /><br />The INSERT statement conflicted with the FOREIGN KEY constraint \"FK<i>MembersForums</i>MemberInfo\". The conflict occurred in database \"C:\\DOCUMENTS AND SETTINGS\\ADMINISTRATOR\\MY DOCUMENTS\\VISUAL STUDIO 2005\\WEBSITES\\GIRGENTIWEBSITE\\APP_DATA\\CLUBDB.MDF\", table \"dbo.MemberInfo\", column 'memberid'.<br />The statement has been terminated. <br />Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. <br /><br />Exception Details: System.Data.SqlClient.SqlException: The INSERT statement conflicted with the FOREIGN KEY constraint \"FK<i>MembersForums</i>MemberInfo\". The conflict occurred in database \"C:\\DOCUMENTS AND SETTINGS\\ADMINISTRATOR\\MY DOCUMENTS\\VISUAL STUDIO 2005\\WEBSITES\\GIRGENTIWEBSITE\\APP_DATA\\CLUBDB.MDF\", table \"dbo.MemberInfo\", column 'memberid'.<br />The statement has been terminated.<br /><br />Source Error: <br /><br />Line 55:                 cmd.Parameters.AddWithValue(\"@memberid\", _memberid)<br />Line 56:                 conn.Open()<br />Line 57:                 Dim reader As SqlDataReader = cmd.ExecuteReader()<br />Line 58:                 If reader.HasRows() And reader.Read() Then<br />Line 59:                     _displayname = reader.GetString(0)<br /><br />Source File: C:\\Documents and Settings\\Administrator\\My Documents\\Visual Studio 2005\\WebSites\\GirgentiWebSite\\App_Code\\ForumUser.vb    Line: 57 <br /><br />I added the following code:<br /><br />Forum/Topics.aspx:<br /><br />\tIf Not IsPostBack Then<br />            ' Modified 07/06/2007 by Lakeside Office Systems, Inc.<br />            '            Panel1.Visible = User.IsInRole(\"Administrators\")<br />            Panel1.Visible = User.IsInRole(\"UserEdits\")<br />            ' ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br />            Panel2.Visible = User.Identity.IsAuthenticated<br />            SqlDataSource2.CancelSelectOnNullParameter = True<br />            If User.Identity.IsAuthenticated Then<br />                SqlDataSource2.SelectParameters(\"memberid\").DefaultValue = \t\tMembership.GetUser.ProviderUserKey.ToString()<br />            End If<br />        End If<br /><br />Web.config:<br /><br />\t&lt;location path=\"forum/manage.aspx\"&gt;<br />    &lt;system.web&gt;<br />      &lt;authorization&gt;<br />        &lt;!--<br />          Following line Modified 07/06/2007 by Lakeside Office Systems, Inc.<br />          &lt;allow roles=\"Administrators\"/&gt;<br />        --&gt;<br />        &lt;allow roles=\"UserEdits\"/&gt;<br />        &lt;deny users=\"*\"/&gt;<br />      &lt;/authorization&gt;<br />    &lt;/system.web&gt;<br />  &lt;/location&gt;<br /><br />Any help would be gratefully appreciated.<br /><br />Thanks,<br />Tony<br />",
    "PostedDate": "2007-07-07T05:52:55.15-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]