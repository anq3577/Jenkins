[
  {
    "Id": "57419",
    "ThreadId": "17604",
    "Html": "\r\nHi all,<br /><br /> I get the following error when trying to create a new tread or posting a reply to a forum<br /><br />-------------------------------------------------------------------------------------------<br /><br />Server Error in '/' Application.<br />--------------------------------------------------------------------------------<br /><br />No connection could be made because the target machine actively refused it <br />Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. <br /><br />Exception Details: System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it<br /><br />Source Error: <br /><br /><br />Line 54:                 smtp.Send(mailMsg)<br />Line 55:             Catch ex As Exception<br />Line 56:                 Throw<br />Line 57:             End Try<br />Line 58:         End Sub<br /><br /><br />Source File: C:\\inetpub\\wwwroot\\FCU\\App_Code\\BLL\\ForumPostNotification.vb    Line: 56 <br /><br />Stack Trace: <br /><br /><br /><a href=\"http://www.codeplex.com/ClubStarterKit/Wiki/View.aspx?title=SocketException%20%280x274d%29%3a%20No%20connection%20could%20be%20made%20because%20the%20target%20machine%20actively%20refused%20it\">SocketException (0x274d): No connection could be made because the target machine actively refused it</a><br />   System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) +1029090<br />   System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) +33<br />   System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket&amp; socket, IPAddress&amp; address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception&amp; exception) +431<br /><br /><a href=\"http://www.codeplex.com/ClubStarterKit/Wiki/View.aspx?title=WebException%3a%20Unable%20to%20connect%20to%20the%20remote%20server\">WebException: Unable to connect to the remote server</a><br />   System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress&amp; address, Socket&amp; abortSocket, Socket&amp; abortSocket6, Int32 timeout) +1475584<br />   System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback) +190<br />   System.Net.PooledStream.Activate(Object owningObject, GeneralAsyncDelegate asyncCallback) +21<br />   System.Net.ConnectionPool.GetConnection(Object owningObject, GeneralAsyncDelegate asyncCallback, Int32 creationTimeout) +318<br />   System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port) +227<br />   System.Net.Mail.SmtpTransport.GetConnection(String host, Int32 port) +316<br />   System.Net.Mail.SmtpClient.GetConnection() +42<br />   System.Net.Mail.SmtpClient.Send(MailMessage message) +1485<br /><br /><a href=\"http://www.codeplex.com/ClubStarterKit/Wiki/View.aspx?title=SmtpException%3a%20Failure%20sending%20mail.\">SmtpException: Failure sending mail.</a><br />   System.Net.Mail.SmtpClient.Send(MailMessage message) +2074<br />   ClubStarterKit.Web.ForumNotification.Notify(ForumMessage forumMsg) in C:\\inetpub\\wwwroot\\FCU\\App_Code\\BLL\\ForumPostNotification.vb:56<br />   ClubStarterKit.Web.Forum.Add(ForumMessage msg, Boolean AdminOnly) in C:\\inetpub\\wwwroot\\FCU\\App_Code\\BLL\\Forum.vb:104<br />   ASP.forum<i>addpost</i>aspx.UpdateButton_Click(Object sender, EventArgs e) in C:\\inetpub\\wwwroot\\FCU\\Forum\\AddPost.aspx:100<br />   System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +105<br />   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +107<br />   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +7<br />   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +11<br />   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +174<br />   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5102<br /><br /><br /><br /><br />--------------------------------------------------------------------------------<br />Version Information: Microsoft .NET Framework Version:2.0.50727.312; ASP.NET Version:2.0.50727.833 <br />",
    "PostedDate": "2007-11-08T19:04:46.68-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "57438",
    "ThreadId": "17604",
    "Html": "\r\nIt looks like your email configuration is improperly set.<br /><br />One system option allows sending an email when the post was finished.  It looks like the server <br />couldn't send it.  Check your site settings and make sure the email account, password, and server are all correct.<br /><br /><br /><br />As a software developer, though, I'm curious if re-throwing at the end of the block is a good idea.  It seems unwise to announce to the world that there is a server misconfiguration.  At my work we have written our own sites to send stack trace and other debugging info to the developers while showing a nice pretty error screen to the clients.  Over the years it has accumulated a lot of useful debugging info -- but that's beside the point for this reply.<br /><br />It's a shame the this system couldn't just send an email to the site admin or some other behind-the-scenes reporting, but obviously if the email is misconfigured then it would have a hard time doing that.  :-)<br />",
    "PostedDate": "2007-11-08T22:51:37.65-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "57608",
    "ThreadId": "17604",
    "Html": "\r\nThanks for the answer.<br /><br />I do not have a smtp server since i'm just playing around with the club site on my laptop.<br /><br />I commented out the throw statement and now i'm getting this error<br /><br />Server Error in '/' Application.<br />--------------------------------------------------------------------------------<br /><br />The INSERT statement conflicted with the FOREIGN KEY constraint \"FK<i>MembersThreads</i>Threads\". The conflict occurred in database \"ClubDB\", table \"dbo.Threads\", column 'threadid'.<br />The statement has been terminated. <br />Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. <br /><br />Exception Details: System.Data.SqlClient.SqlException: The INSERT statement conflicted with the FOREIGN KEY constraint \"FK<i>MembersThreads</i>Threads\". The conflict occurred in database \"ClubDB\", table \"dbo.Threads\", column 'threadid'.<br />The statement has been terminated.<br /><br />Source Error: <br /><br /><br />Line 108:<br />Line 109:        Public Shared Sub MarkThreadRead(ByVal threadid As Integer, ByVal memberid As Guid)<br />Line 110:            SPs.MarkThreadRead(threadid, memberid).Execute()<br />Line 111:        End Sub<br />Line 112:<br /><br /><br />Source File: C:\\inetpub\\wwwroot\\FCU\\App_Code\\BLL\\Forum.vb    Line: 110 <br /><br />Stack Trace: <br /><br /><br />[SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_MembersThreads_Threads\". The conflict occurred in database \"ClubDB\", table \"dbo.Threads\", column 'threadid'.<br />The statement has been terminated.]<br />   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +859322<br />   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +736198<br />   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +188<br />   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1959<br />   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +149<br />   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +903<br />   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +132<br />   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) +415<br />   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +135<br />   SubSonic.SqlDataProvider.ExecuteQuery(QueryCommand qry) in C:\\SubSonic 2.0.3\\src\\SubSonic\\DataProviders\\SqlDataProvider.cs:196<br />   SubSonic.StoredProcedure.Execute() in C:\\SubSonic 2.0.3\\src\\SubSonic\\ActiveRecord\\StoredProcedure.cs:152<br />   ClubStarterKit.Web.Forum.MarkThreadRead(Int32 threadid, Guid memberid) in C:\\inetpub\\wwwroot\\FCU\\App_Code\\BLL\\Forum.vb:110<br />   ASP.forum<i>addpost</i>aspx.UpdateButton_Click(Object sender, EventArgs e) in C:\\inetpub\\wwwroot\\FCU\\Forum\\AddPost.aspx:102<br />   System.Web.UI.WebControls.LinkButton.OnClick(EventArgs e) +105<br />   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +107<br />   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +7<br />   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +11<br />   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +174<br />   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5102<br /><br /><br /><br /><br />--------------------------------------------------------------------------------<br />Version Information: Microsoft .NET Framework Version:2.0.50727.312; ASP.NET Version:2.0.50727.833 <br /><br />I think we should give the option to send email or not from the site setting<br /><br />Hannibal<br />",
    "PostedDate": "2007-11-09T15:00:48.033-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "86347",
    "ThreadId": "17604",
    "Html": "\r\nYou can't send email from your app on your local machine.  While testing on your local machine just comment out Line 54: smtp.Send(mailMsg).  <br /><br />You will then more than likely receive an error about not being able to mark the thread as read when you are replying.  I have not spent any time on trying to fix that issue, I just commented it out as it was not important to me that that thread is marked as read when someone replies.  So in your Forum/AddPost.aspx VB code find         ClubStarterKit.Web.Forum.MarkThreadRead(newmsgthreadid, uGuid) and just commented it out.<br /><br />There is also another discussion on this topic in this Forum with a possible solution (I haven't tried it yet).  Refer to thread 21234 <a href=\"http://www.codeplex.com/ClubStarterKit/Thread/View.aspx?ThreadId=21234\" class=\"externalLink\">http://www.codeplex.com/ClubStarterKit/Thread/View.aspx?ThreadId=21234<span class=\"externalLinkIcon\" style=\"font-family:Consolas, Courier New, Courier, Monospace;\"></span></a><br /><br />Good luck.<br />",
    "PostedDate": "2008-04-11T08:56:48.54-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "86349",
    "ThreadId": "17604",
    "Html": "\r\nHere's another thread on same issue, it seems to have solved the issue for those who have tried it.<br /><br /><a href=\"http://www.codeplex.com/ClubStarterKit/Thread/View.aspx?ThreadId=16103\" class=\"externalLink\">http://www.codeplex.com/ClubStarterKit/Thread/View.aspx?ThreadId=16103<span class=\"externalLinkIcon\" style=\"font-family:Consolas, Courier New, Courier, Monospace;\"></span></a><br />",
    "PostedDate": "2008-04-11T09:07:48.547-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]